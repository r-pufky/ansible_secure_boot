---
###############################################################################
# Secure Boot Role Options
###############################################################################

# Last time github options were validated against a default configuration.
secure_boot_role_validate_date: '2025-01-02'
secure_boot_role_validate_release: 'bookworm'

# mokutil binary
secure_boot_role_mokutil: '/usr/bin/mokutil'

# mokutil password hash temp file
secure_boot_role_tmp_hash: '/tmp/.mokhash'

###############################################################################
# APT Packages
###############################################################################

secure_boot_role_packages:
  - 'mokutil'  # MOK enrollment
  - 'openssl'  # MOK key generation
  - 'dkms'  # to load MOK key for any future DKMS actions

###############################################################################
# MOK Key Generation
###############################################################################
# All default values parsed from autogenerated mok.key and DKMS script.

# openssl list public key (der format)
secure_boot_role_list_key: 'openssl x509 -inform der -noout -text -in mok.key'

# MOK key common name (CN)
secure_boot_role_mok_common_name: 'DKMS module signing key'

# MOK key certificate expiration (days)
secure_boot_role_mok_expiration: 36500

# MOK key format
secure_boot_role_mok_format: 'DER'

# MOK key alhorithm
secure_boot_role_mok_algorithm: 'rsa:2048'

# openssl command to create a MOK key (DER signing)
secure_boot_role_create_mok: >
  openssl req -nodes -new -x509
  -newkey {{ secure_boot_role_mok_algorithm }}
  -outform {{ secure_boot_role_mok_format }}
  -days {{ secure_boot_role_mok_expiration }}
  -subj "/CN={{ secure_boot_role_mok_common_name }}/"
# -keyout mok.key  # use generated location.
# -out mok.pub  # use generated location.
